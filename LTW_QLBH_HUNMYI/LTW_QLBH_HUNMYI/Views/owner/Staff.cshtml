@model IEnumerable<LTW_QLBH_HUNMYI.Models.NHANVIEN>
@{
    Layout = "~/Views/Shared/_LayoutOwner.cshtml";
    ViewBag.Title = "Quản lý nhân viên";
}
@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="fas fa-check-circle"></i> @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="fas fa-exclamation-circle"></i> @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<div class="mb-3">
    <a href="@Url.Action("CreateStaff", "Owner")" class="btn btn-success">
        <i class="fas fa-plus"></i> Thêm nhân viên
    </a>
</div>

<div class="card">
    <div class="card-body">
        <table class="table table-hover table-bordered align-middle text-center mb-0">
            <thead class="table-dark">
                <tr>
                    <th>Mã NV</th>
                    <th>Họ tên</th>
                    <th>Giới tính</th>
                    <th>Số điện thoại</th>
                    <th>Email</th>
                    <th>Chức vụ</th>
                    <th>Trạng thái</th>
                    <th width="160">Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var nv in Model)
                {
                    <tr>
                        <td class="fw-bold">@nv.MANV</td>
                        <td class="text-start">@nv.HOTENNV</td>
                        <td>
                            @if (nv.GIOITINH == "Nam")
                            {
                                <span><i class="fas fa-mars text-primary"></i> Nam</span>
                            }
                            else if (nv.GIOITINH == "Nữ")
                            {
                                <span><i class="fas fa-venus text-danger"></i> Nữ</span>
                            }
                            else
                            {
                                <span>@nv.GIOITINH</span>
                            }
                        </td>
                        <td>@nv.SDT</td>
                        <td>@nv.EMAIL</td>
                        <td>
                            @if (nv.CHUCVU == "Chủ shop")
                            {
                                <span class="badge bg-warning text-dark">
                                    <i class="fas fa-crown"></i> @nv.CHUCVU
                                </span>
                            }
                            else
                            {
                                <span class="badge bg-info">
                                    <i class="fas fa-user-tie"></i> @nv.CHUCVU
                                </span>
                            }
                        </td>
                        <td>
                            @if (nv.TRANGTHAI == "Đang làm")
                            {
                                <span class="badge bg-success">
                                    <i class="fas fa-check-circle"></i> Đang làm
                                </span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">
                                    <i class="fas fa-times-circle"></i> @nv.TRANGTHAI
                                </span>
                            }
                        </td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-cog"></i> Thao tác
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li>
                                        <a class="dropdown-item" href="@Url.Action("StaffDetail", "Owner", new { id = nv.MANV })">
                                            <i class="fas fa-eye text-info"></i> Xem chi tiết
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="@Url.Action("EditStaff", "Owner", new { id = nv.MANV })">
                                            <i class="fas fa-edit text-warning"></i> Chỉnh sửa
                                        </a>
                                    </li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item text-danger" href="@Url.Action("DeleteStaff", "Owner", new { id = nv.MANV })">
                                            <i class="fas fa-trash-alt"></i> Xóa nhân viên
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<style>
    .card {
        border: none;
        box-shadow: 0 0 20px rgba(0,0,0,0.08);
        border-radius: 10px;
    }

    .table {
        margin-bottom: 0;
    }

    .table thead th {
        font-weight: 600;
        white-space: nowrap;
    }

    .dropdown-item {
        cursor: pointer;
    }

    .dropdown-item i {
        width: 20px;
    }
</style>
